<!DOCTYPE html>
<html lang="bs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1e Hard - ZAVR≈†NI KVIZ Nivo 1 | MEKTEB</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Lora:wght@400;600&display=swap');
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Lora', serif;
            background: linear-gradient(135deg, #064e3b 0%, #0f766e 50%, #065f46 100%);
            min-height: 100vh;
            color: white;
        }
        
        .container { max-width: 900px; margin: 0 auto; padding: 2rem; }
        .quiz-header { text-align: center; margin-bottom: 2rem; }
        .quiz-icon { width: 80px; height: 80px; margin-bottom: 1rem; }
        
        h1 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .subtitle { font-size: 1.2rem; color: #d1fae5; }
        
        .back-link {
            display: inline-block;
            margin-bottom: 2rem;
            color: #fbbf24;
            text-decoration: none;
            font-size: 1.1rem;
            transition: all 0.3s;
        }
        .back-link:hover { color: #f59e0b; transform: translateX(-5px); }
        
        .quiz-info {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(110, 231, 183, 0.3);
            border-radius: 1.5rem;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
        }
        
        .start-btn {
            background: linear-gradient(to right, #10b981, #14b8a6);
            color: white;
            border: none;
            padding: 1rem 3rem;
            font-size: 1.3rem;
            border-radius: 2rem;
            cursor: pointer;
            font-family: 'Lora', serif;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
        }
        .start-btn:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(16, 185, 129, 0.5); }
        
        .screen { display: none; }
        .screen.active { display: block; }
        
        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .progress-bar-container {
            flex: 1;
            height: 8px;
            background: rgba(255,255,255,0.2);
            border-radius: 4px;
            margin: 0 1rem;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(to right, #fbbf24, #f59e0b);
            border-radius: 4px;
            transition: width 0.3s;
        }
        
        .question-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(110, 231, 183, 0.3);
            border-radius: 1.5rem;
            padding: 2rem;
            position: relative;
        }
        
        .question-text {
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }
        
        .options { display: flex; flex-direction: column; }
        
        .option {
            background: rgba(255,255,255,0.15);
            border: 2px solid rgba(255,255,255,0.3);
            padding: 1rem 1.5rem;
            border-radius: 12px;
            color: white;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
            font-family: 'Lora', serif;
            margin-bottom: 1rem;
        }
        .option:last-child {
            margin-bottom: 0;
        }
        .option:hover:not(.disabled) { 
            background: rgba(34, 197, 94, 0.4);
            border-color: #fbbf24;
            transform: translateX(10px);
        }
        .option.correct {
            background: linear-gradient(135deg, #10b981, #059669);
            border-color: #10b981;
        }
        .option.incorrect {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            border-color: #ef4444;
        }
        .option.disabled { pointer-events: none; }

        .checkbox-option {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        .checkbox-option input[type="checkbox"] {
            width: 24px;
            height: 24px;
            cursor: pointer;
        }

        .answer-btn {
            background: linear-gradient(to right, #10b981, #14b8a6);
            color: white;
            border: none;
            padding: 1rem 3rem;
            font-size: 1.2rem;
            border-radius: 2rem;
            cursor: pointer;
            font-family: 'Lora', serif;
            transition: all 0.3s;
            margin-top: 1.5rem;
            width: 100%;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
        }
        .answer-btn:hover { 
            transform: translateY(-3px); 
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.5); 
        }

        .reorder-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .reorder-item {
            background: rgba(255,255,255,0.15);
            border: 2px solid rgba(255,255,255,0.3);
            padding: 1rem 1.5rem;
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
            transition: all 0.3s;
        }
        .reorder-item:hover {
            border-color: #fbbf24;
        }
        .reorder-controls {
            display: flex;
            gap: 0.5rem;
        }
        .reorder-btn {
            background: #fbbf24;
            color: #064e3b;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.2rem;
            font-weight: bold;
            transition: all 0.3s;
        }
        .reorder-btn:hover {
            background: #f59e0b;
            transform: scale(1.1);
        }

        .text-container {
            background: rgba(255,255,255,0.15);
            border: 2px solid #fbbf24;
            padding: 1.5rem;
            border-radius: 12px;
            line-height: 2;
            font-size: 1.1rem;
        }
        .word {
            padding: 3px 6px;
            cursor: pointer;
            transition: all 0.2s;
            border-radius: 4px;
            display: inline-block;
            margin: 2px;
            border: 2px solid transparent;
        }
        .word:hover {
            background: rgba(251, 191, 36, 0.3);
            border: 2px solid #fbbf24;
        }
        .word.marked {
            background: #fbbf24;
            color: #064e3b;
            font-weight: 600;
        }

        .sentence-builder {
            background: rgba(255,255,255,0.15);
            border: 2px solid #fbbf24;
            padding: 1.5rem;
            border-radius: 12px;
            min-height: 100px;
            margin-bottom: 1.5rem;
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            align-items: center;
            font-size: 1.1rem;
        }
        .sentence-builder span {
            margin: 0 0.25rem;
            display: inline-block;
            white-space: pre;
        }
        .drop-zone {
            background: rgba(255,255,255,0.1);
            border: 2px dashed rgba(255,255,255,0.4);
            padding: 0.5rem 1rem;
            border-radius: 12px;
            min-width: 100px;
            min-height: 45px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            cursor: pointer;
            margin: 0.5rem;
            font-size: 1.1rem;
        }
        .drop-zone:hover {
            border-color: rgba(255,255,255,0.6);
            background: rgba(251, 191, 36, 0.15);
            transform: scale(1.02);
        }
        .drop-zone.filled {
            border-style: solid;
            border-color: #10b981;
            background: rgba(16, 185, 129, 0.15);
        }
        .drop-zone.filled {
            border-style: solid;
            background: rgba(251, 191, 36, 0.2);
        }
        .word-bank {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            justify-content: center;
            padding: 1rem;
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
        }
        .draggable-word {
            background: #fbbf24;
            color: #064e3b;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            user-select: none;
            transition: all 0.3s;
            font-weight: 600;
            border: 2px solid transparent;
            position: relative;
        }
        .draggable-word.selected {
            transform: scale(1.15);
            border: 2px solid #065f46;
            box-shadow: 0 0 15px rgba(251, 191, 36, 0.6);
            z-index: 10;
        }
        .draggable-word:hover {
            background: #f59e0b;
            border: 2px solid #fbbf24;
            transform: scale(1.05);
        }
        .draggable-word.used {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .popup-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 1rem;
        }
        .popup-overlay.active { display: flex; }

        .popup-content {
            background: #fbbf24;
            color: #1a1a1a;
            border-radius: 1.5rem;
            padding: 1.5rem;
            max-width: 500px;
            width: 100%;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            animation: popupIn 0.3s ease;
        }

        @keyframes popupIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .popup-icon { font-size: 2.5rem; margin-bottom: 0.5rem; }
        .popup-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #065f46;
        }
        .popup-explanation {
            font-size: 1rem;
            line-height: 1.5;
            margin-bottom: 1.5rem;
            color: #333;
        }
        .popup-btn {
            background: linear-gradient(to right, #065f46, #0f766e);
            color: white;
            border: none;
            padding: 0.8rem 2rem;
            font-size: 1.1rem;
            border-radius: 2rem;
            cursor: pointer;
            font-family: 'Lora', serif;
            transition: all 0.3s;
        }
        .popup-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(6, 95, 70, 0.4); }

        .result-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(110, 231, 183, 0.3);
            border-radius: 1.5rem;
            padding: 3rem 2rem;
            text-align: center;
        }
        
        .result-emoji { font-size: 5rem; margin-bottom: 1rem; }
        .result-message { font-size: 1.8rem; margin-bottom: 1rem; font-family: 'Playfair Display', serif; }
        .result-score { font-size: 3rem; color: #fbbf24; font-weight: bold; margin-bottom: 0.5rem; }
        .result-percentage { font-size: 1.2rem; color: #d1fae5; margin-bottom: 2rem; }
        
        .btn-group { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; }
        
        .retry-btn, .home-btn {
            padding: 1rem 2rem;
            font-size: 1.1rem;
            border-radius: 2rem;
            cursor: pointer;
            font-family: 'Lora', serif;
            transition: all 0.3s;
            text-decoration: none;
        }
        .retry-btn {
            background: linear-gradient(to right, #10b981, #14b8a6);
            color: white;
            border: none;
        }
        .home-btn {
            background: transparent;
            color: #fbbf24;
            border: 2px solid #fbbf24;
        }
        .retry-btn:hover, .home-btn:hover { transform: translateY(-3px); }
    </style>
</head>
<body>
    <div class="container screen active" id="startScreen">
        <a href="index.html" class="back-link">‚Üê Poƒçetna</a>
        <div class="quiz-header">
            <img src="mekteb_logo.png" alt="MEKTEB" class="quiz-icon">
            <h1>KVIZ 1E - HARD</h1>
            <p class="subtitle">ZAVR≈†NI KVIZ - Kompletan Nivo 1</p>
        </div>
        <div class="quiz-info">
            <p style="font-size: 1.2rem; margin-bottom: 1rem;">üèÜ SVE TEME NIVOA 1: Iman, Islam, Poslanik, Namaz, Abdest, Dove, Bajrami, Hid≈æra</p>
            <p style="margin-bottom: 2rem;">20 pitanja od 52 iz baze ‚Ä¢ 4 razliƒçita tipa pitanja ‚Ä¢ ZAVR≈†NI TEST</p>
            <button class="start-btn" onclick="startQuiz()">POKRENI ZAVR≈†NI KVIZ</button>
        </div>
    </div>

    <div class="container screen" id="quizScreen">
        <div class="quiz-header">
            <img src="mekteb_logo.png" alt="MEKTEB" class="quiz-icon">
            <h1>ZAVR≈†NI KVIZ 1E</h1>
            <p class="subtitle">Kompletan Nivo 1</p>
        </div>
        <div class="progress-info">
            <a href="index.html" class="back-link" style="margin:0;">‚Üê Poƒçetna</a>
            <div class="progress-bar-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <span id="questionCount">1/20</span>
        </div>
        <div class="question-card">
            <div class="question-text" id="questionText"></div>
            <div id="questionContainer"></div>
        </div>
    </div>

    <div class="popup-overlay" id="popupOverlay">
        <div class="popup-content">
            <div class="popup-icon" id="popupIcon">‚úÖ</div>
            <div class="popup-title" id="popupTitle">Taƒçno!</div>
            <div class="popup-explanation" id="popupExplanation"></div>
            <button class="popup-btn" onclick="nextQuestion()">Sljedeƒáe pitanje ‚Üí</button>
        </div>
    </div>

    <div class="container screen" id="resultScreen">
        <div class="quiz-header">
            <img src="mekteb_logo.png" alt="MEKTEB" class="quiz-icon">
            <h1>REZULTAT ZAVR≈†NOG KVIZA</h1>
        </div>
        <div class="result-card">
            <div class="result-emoji" id="resultEmoji">üåü</div>
            <div class="result-message" id="resultMessage">Odliƒçan rezultat!</div>
            <div class="result-score" id="resultScore">16/20</div>
            <div class="result-percentage" id="resultPercentage">80% taƒçnih odgovora</div>
            <div class="btn-group">
                <button class="retry-btn" onclick="startQuiz()">Poku≈°aj ponovo</button>
                <a href="index.html" class="home-btn">Poƒçetna stranica</a>
            </div>
        </div>
    </div>

    <script>
        const allQuestions = [
            // CHECKBOX (13) - MIX SVIH TEMA
            {type:'checkbox',question:'Koje su imanski ≈°arti?',options:['Vjerovanje u Allaha','Namaz','Vjerovanje u meleke','Vjerovanje u kader','Post'],correct:['Vjerovanje u Allaha','Vjerovanje u meleke','Vjerovanje u kader'],explanation:'Imanski ≈°arti: vjerovanje u Allaha, meleke, knjige, poslanike, Sudnji dan, kader.'},
            {type:'checkbox',question:'Koje su islamski ≈°arti?',options:['≈†ehadet','Namaz','Vjerovanje u Allaha','Post','Zekat','Had≈æ'],correct:['≈†ehadet','Namaz','Post','Zekat','Had≈æ'],explanation:'Pet islamskih ≈°artova (stubova islama).'},
            {type:'checkbox',question:'Koji su abdeski ≈°arti?',options:['Umiti lice','Oprati ruke','Namazati glavu','Oprati noge','Prouƒçiti Bismillu'],correct:['Umiti lice','Oprati ruke','Namazati glavu','Oprati noge'],explanation:'ƒåetiri abdeska ≈°arta (farza).'},
            {type:'checkbox',question:'Koji su namaski ruknovi?',options:['Iftitahi-tekbir','Kijam','Ruku\'','Sed≈æda','Abdest','Kadei-ehire'],correct:['Iftitahi-tekbir','Kijam','Ruku\'','Sed≈æda','Kadei-ehire'],explanation:'≈†est namaskih ruknova (Kiraet spada u Kijam).'},
            {type:'checkbox',question:'Koje dove uƒçimo?',options:['Rabbi jessir','Allahu rabbi','Hasbi rabbi','Kelime-i ≈°ehadet'],correct:['Rabbi jessir','Allahu rabbi','Hasbi rabbi'],explanation:'Dove su: Rabbi jessir, Rabbi zidni ilma, Allahu rabbi, Hasbi rabbi. Kelime-i ≈°ehadet je svjedoƒçenje.'},
            {type:'checkbox',question:'Koliko dana traju bajrami?',options:['Ramazanski 3','Ramazanski 4','Kurban 3','Kurban 4'],correct:['Ramazanski 3','Kurban 4'],explanation:'Ramazanski bajram 3 dana, Kurban-bajram 4 dana.'},
            {type:'checkbox',question:'≈†ta je taƒçno o Hid≈æri?',options:['Preselenje iz Mekke','622. godina','Preselenje iz Medine','Poƒçetak kalendara'],correct:['Preselenje iz Mekke','622. godina','Poƒçetak kalendara'],explanation:'Hid≈æra: iz Mekke u Medinu, 622. godine, poƒçetak hid≈æretske godine.'},
            {type:'checkbox',question:'Koliko namaza klanjamo dnevno?',options:['Sabah','Podne','Ikindija','Ak≈°am','Jacija','Teravih'],correct:['Sabah','Podne','Ikindija','Ak≈°am','Jacija'],explanation:'Pet dnevnih farz namaza.'},
            {type:'checkbox',question:'Koliko rekata ima Sabah namaz?',options:['2 sunnet','2 farz','3 sunnet','3 farz'],correct:['2 sunnet','2 farz'],explanation:'Sabah: 2 sunnet + 2 farz = ukupno 4 rekata.'},
            {type:'checkbox',question:'Koji su mubarek-dani?',options:['Nova hid≈æretska godina','Mevlud','Ramazanski bajram','Kurban-bajram','Teravih'],correct:['Nova hid≈æretska godina','Mevlud','Ramazanski bajram','Kurban-bajram'],explanation:'ƒåetiri glavna mubarek-dana u islamu.'},
            {type:'checkbox',question:'Kada je roƒëen Muhammed a.s.?',options:['12. rebiul-evvela','571. godine','U Mekki','622. godine'],correct:['12. rebiul-evvela','571. godine','U Mekki'],explanation:'Muhammed a.s.: 12. rebiul-evvela 571. u Mekki.'},
            {type:'checkbox',question:'≈†ta kvari abdest?',options:['Spavanje','Oticanje krvi','Priƒçanje','Povraƒáanje'],correct:['Spavanje','Oticanje krvi','Povraƒáanje'],explanation:'Abdest kvare: spavanje, oticanje krvi/tekuƒáine, povraƒáanje, prirodna nu≈æda, glasno smijanje u namazu.'},
            {type:'checkbox',question:'Koliko poslanika je poslano?',options:['124.000 ukupno','25 u Kur\'anu','313 ukupno','1.000 u Kur\'anu'],correct:['124.000 ukupno','25 u Kur\'anu'],explanation:'Allah je poslao 124.000 poslanika, 25 je spomenuto u Kur\'anu.'},

            // REORDER (13) - MIX
            {type:'reorder',question:'Poredaj 6 imanskih ≈°artova:',items:[{text:'Vjerovanje u Allaha',order:1},{text:'Vjerovanje u meleke',order:2},{text:'Vjerovanje u knjige',order:3},{text:'Vjerovanje u poslanike',order:4},{text:'Vjerovanje u Sudnji dan',order:5},{text:'Vjerovanje u kader',order:6}],explanation:'≈†est imanskih ≈°artova po redu.'},
            {type:'reorder',question:'Poredaj 5 islamskih ≈°artova:',items:[{text:'≈†ehadet',order:1},{text:'Namaz',order:2},{text:'Post',order:3},{text:'Zekat',order:4},{text:'Had≈æ',order:5}],explanation:'Pet islamskih ≈°artova (stubova islama).'},
            {type:'reorder',question:'Poredaj 4 abdeska ≈°arta:',items:[{text:'Umiti lice',order:1},{text:'Oprati ruke do lakata',order:2},{text:'Namazati glavu',order:3},{text:'Oprati noge do ƒçlanaka',order:4}],explanation:'ƒåetiri abdeska farza.'},
            {type:'reorder',question:'Poredaj 6 namaskih ruknova:',items:[{text:'Iftitahi-tekbir',order:1},{text:'Kijam',order:2},{text:'Kiraet',order:3},{text:'Ruku\'',order:4},{text:'Sed≈æda',order:5},{text:'Kadei-ehire',order:6}],explanation:'≈†est namaskih ruknova.'},
            {type:'reorder',question:'Poredaj Rabbi jessir:',items:[{text:'Rabbi jessir',order:1},{text:'ve la tu\'assir',order:2},{text:'Rabbi temmim',order:3},{text:'bil-hajr!',order:4}],explanation:'Dova Rabbi jessir.'},
            {type:'reorder',question:'Poredaj 5 dnevnih namaza:',items:[{text:'Sabah',order:1},{text:'Podne',order:2},{text:'Ikindija',order:3},{text:'Ak≈°am',order:4},{text:'Jacija',order:5}],explanation:'Pet dnevnih namaza po redu.'},
            {type:'reorder',question:'Poredaj 4 mubarek-dana:',items:[{text:'Nova hid≈æretska godina',order:1},{text:'Mevlud',order:2},{text:'Ramazanski bajram',order:3},{text:'Kurban-bajram',order:4}],explanation:'ƒåetiri glavna mubarek-dana.'},
            {type:'reorder',question:'Poredaj prvo stajanje u namazu:',items:[{text:'Subhaneke',order:1},{text:'Euzubillu',order:2},{text:'Bismillu',order:3},{text:'Fatiha',order:4},{text:'Sura',order:5}],explanation:'Prvo stajanje u namazu.'},
            {type:'reorder',question:'Poredaj Kelime-i ≈°ehadet:',items:[{text:'E≈°hedu en la ilahe',order:1},{text:'illallah',order:2},{text:'ve e≈°hedu enne Muhammeden',order:3},{text:'\'abduhu ve resuluhu',order:4}],explanation:'Kelime-i ≈°ehadet po redu.'},
            {type:'reorder',question:'Poredaj poslanike hronolo≈°ki:',items:[{text:'Adem a.s.',order:1},{text:'Nuh a.s.',order:2},{text:'Ibrahim a.s.',order:3},{text:'Musa a.s.',order:4},{text:'Isa a.s.',order:5},{text:'Muhammed a.s.',order:6}],explanation:'Neki od najpoznatijih poslanika.'},
            {type:'reorder',question:'Poredaj prvih 6 hid≈æretskih mjeseci:',items:[{text:'Muharrem',order:1},{text:'Safer',order:2},{text:'Rebiul-evvel',order:3},{text:'Rebiul-ahir',order:4},{text:'D≈æumadel-ula',order:5},{text:'D≈æumadel-uhra',order:6}],explanation:'Prvih 6 mjeseci hid≈æretske godine.'},
            {type:'reorder',question:'Poredaj kadei-ehire:',items:[{text:'Et-Tehijatu',order:1},{text:'Salavati',order:2},{text:'Dove',order:3}],explanation:'Posljednje sjedenje u namazu.'},
            {type:'reorder',question:'Poredaj jedan rekat:',items:[{text:'Kijam + Kiraet',order:1},{text:'Ruku\'',order:2},{text:'Sed≈æda',order:3},{text:'Sed≈æda (druga)',order:4}],explanation:'Jedan rekat po redu.'},

            // MARK WORDS (13) - MIX
            {type:'markWords',question:'Pronaƒëi gre≈°ke:',text:'Imanskih ≈°artova ima 5. Islamskih ≈°artova ima 6.',words:['Imanskih','≈°artova','ima','5.','Islamskih','≈°artova','ima','6.'],incorrect:[3,7],explanation:'Imanskih 6 (ne 5), islamskih 5 (ne 6).'},
            {type:'markWords',question:'Pronaƒëi gre≈°ke:',text:'Muhammed a.s. je prvi poslanik. Adem a.s. je zadnji poslanik.',words:['Muhammed','a.s.','je','prvi','poslanik.','Adem','a.s.','je','zadnji','poslanik.'],incorrect:[3,8],explanation:'Muhammed a.s. je ZADNJI, Adem a.s. je PRVI.'},
            {type:'markWords',question:'Pronaƒëi gre≈°ke:',text:'Abdeskih ≈°artova ima 5. Prvi je umiti lice, drugi oprati noge.',words:['Abdeskih','≈°artova','ima','5.','Prvi','je','umiti','lice,','drugi','oprati','noge.'],incorrect:[3,9,10],explanation:'Abdeskih 4 (ne 5), drugi je oprati RUKE (ne noge).'},
            {type:'markWords',question:'Pronaƒëi gre≈°ke:',text:'Sabah-namaz ima 3 sunnet i 3 farz rekata.',words:['Sabah-namaz','ima','3','sunnet','i','3','farz','rekata.'],incorrect:[2,5],explanation:'Sabah: 2 sunnet (ne 3) i 2 farz (ne 3).'},
            {type:'markWords',question:'Pronaƒëi gre≈°ke:',text:'Namaskih ruknova ima 5. Prvi je Kijam.',words:['Namaskih','ruknova','ima','5.','Prvi','je','Kijam.'],incorrect:[3,6],explanation:'Namaskih ruknova ima 6 (ne 5), prvi je Iftitahi-tekbir (ne Kijam).'},
            {type:'markWords',question:'Pronaƒëi gre≈°ke:',text:'Ramazanski bajram traje 4 dana. Kurban-bajram traje 3 dana.',words:['Ramazanski','bajram','traje','4','dana.','Kurban-bajram','traje','3','dana.'],incorrect:[3,7],explanation:'Ramazanski 3 dana (ne 4), Kurban 4 dana (ne 3).'},
            {type:'markWords',question:'Pronaƒëi gre≈°ke:',text:'Hid≈æra se dogodila 632. godine. To je preselenje iz Medine u Mekku.',words:['Hid≈æra','se','dogodila','632.','godine.','To','je','preselenje','iz','Medine','u','Mekku.'],incorrect:[3,9,11],explanation:'Hid≈æra 622. (ne 632), iz Mekke (ne Medine) u Medinu (ne Mekku).'},
            {type:'markWords',question:'Pronaƒëi gre≈°ke:',text:'Hid≈æretska godina ima 10 mjeseci i 365 dana.',words:['Hid≈æretska','godina','ima','10','mjeseci','i','365','dana.'],incorrect:[3,6],explanation:'Hid≈æretska: 12 mjeseci (ne 10), 355 dana (ne 365).'},
            {type:'markWords',question:'Pronaƒëi gre≈°ke:',text:'Muhammed a.s. roƒëen je 10. muharrema 622. godine u Medini.',words:['Muhammed','a.s.','roƒëen','je','10.','muharrema','622.','godine','u','Medini.'],incorrect:[4,5,6,9],explanation:'Roƒëen 12. rebiul-evvela (ne 10. muharrema) 571. (ne 622.) u Mekki (ne Medini).'},
            {type:'markWords',question:'Pronaƒëi gre≈°ke:',text:'Rabbi jessir znaƒçi: Gospodaru, ote≈æaj a ne olak≈°aj!',words:['Rabbi','jessir','znaƒçi:','Gospodaru,','ote≈æaj','a','ne','olak≈°aj!'],incorrect:[4,7],explanation:'Rabbi jessir: olak≈°aj (ne ote≈æaj) a ne ote≈æaj (ne olak≈°aj).'},
            {type:'markWords',question:'Pronaƒëi gre≈°ke:',text:'Dnevnih namaza ima ƒçetiri: Sabah, Podne, Ikindija, Ak≈°am.',words:['Dnevnih','namaza','ima','ƒçetiri:','Sabah,','Podne,','Ikindija,','Ak≈°am.'],incorrect:[3],explanation:'Dnevnih namaza ima PET (ne ƒçetiri): + Jacija.'},
            {type:'markWords',question:'Pronaƒëi gre≈°ke:',text:'Na sed≈ædi uƒçimo: Subhane Rabbijel-\'A≈æim tri puta.',words:['Na','sed≈ædi','uƒçimo:','Subhane','Rabbijel-\'A≈æim','tri','puta.'],incorrect:[4],explanation:'Na sed≈ædi: Subhane Rabbijel-E\'ALA (ne \'A≈æim).'},
            {type:'markWords',question:'Pronaƒëi gre≈°ke:',text:'Mubarek-dana ima tri: Mevlud, Ramazanski i Kurban bajram.',words:['Mubarek-dana','ima','tri:','Mevlud,','Ramazanski','i','Kurban','bajram.'],incorrect:[2],explanation:'Mubarek-dana ima 4 (ne tri): + Nova hid≈æretska godina.'},

            // DRAG DROP (13) - MIX
            {type:'dragDrop',question:'Dopuni broj ≈°artova:',template:['Imanskih ≈°artova ima','DROP','a islamskih ima','DROP'],words:['6,','5','5,','6'],correct:['6,','5'],explanation:'Imanskih 6, islamskih 5.'},
            {type:'dragDrop',question:'Dopuni poslanike:',template:['Prvi poslanik je','DROP','a zadnji je','DROP'],words:['Adem a.s.','Muhammed a.s.','Nuh a.s.','Isa a.s.'],correct:['Adem a.s.','Muhammed a.s.'],explanation:'Prvi Adem, zadnji Muhammed a.s.'},
            {type:'dragDrop',question:'Dopuni abdest:',template:['Abdeskih ≈°artova ima','DROP','Prvi je','DROP'],words:['4.','umiti lice','3.','oprati ruke'],correct:['4.','umiti lice'],explanation:'Abdeskih 4, prvi je umiti lice.'},
            {type:'dragDrop',question:'Dopuni Sabah-namaz:',template:['Sabah-namaz ima','DROP','sunnet i','DROP','farz'],words:['2','2','3','3'],correct:['2','2'],explanation:'Sabah: 2 sunnet + 2 farz.'},
            {type:'dragDrop',question:'Dopuni ruknove:',template:['Namaskih ruknova ima','DROP','Prvi je','DROP'],words:['6.','Iftitahi-tekbir','5.','Kijam'],correct:['6.','Iftitahi-tekbir'],explanation:'Namaskih ruknova 6, prvi je Iftitahi-tekbir.'},
            {type:'dragDrop',question:'Dopuni bajrame:',template:['Ramazanski bajram traje','DROP','dana, Kurban','DROP','dana'],words:['3','4','4','3'],correct:['3','4'],explanation:'Ramazanski 3, Kurban 4 dana.'},
            {type:'dragDrop',question:'Dopuni Hid≈æru:',template:['Hid≈æra se dogodila','DROP','godine iz','DROP','u Medinu'],words:['622.','Mekke','632.','Medine'],correct:['622.','Mekke'],explanation:'Hid≈æra 622. iz Mekke u Medinu.'},
            {type:'dragDrop',question:'Dopuni godinu:',template:['Hid≈æretska godina ima','DROP','mjeseci i','DROP','dana'],words:['12','355','10','365'],correct:['12','355'],explanation:'Hid≈æretska: 12 mjeseci, 355 dana.'},
            {type:'dragDrop',question:'Dopuni Mevlud:',template:['Muhammed a.s. roƒëen','DROP','rebiul-evvela','DROP','godine'],words:['12.','571.','10.','622.'],correct:['12.','571.'],explanation:'Muhammed a.s.: 12. rebiul-evvela 571.'},
            {type:'dragDrop',question:'Dopuni Rabbi jessir:',template:['Rabbi jessir ve la','DROP','Rabbi temmim','DROP'],words:['tu\'assir,','bil-hajr!','tu\'alim,','bil-ilm!'],correct:['tu\'assir,','bil-hajr!'],explanation:'Rabbi jessir: olak≈°aj a ne ote≈æaj, dovr≈°i sa dobrom.'},
            {type:'dragDrop',question:'Dopuni namaze:',template:['Dnevnih namaza ima','DROP','Prvi je','DROP'],words:['5.','Sabah','4.','Podne'],correct:['5.','Sabah'],explanation:'Dnevnih namaza 5, prvi je Sabah.'},
            {type:'dragDrop',question:'Dopuni sed≈ædu:',template:['Na sed≈ædi uƒçimo Subhane','DROP','tri puta'],words:['Rabbijel-E\'ala','Rabbijel-\'A≈æim','Allahu ekber','La ilahe illallah'],correct:['Rabbijel-E\'ala'],explanation:'Na sed≈ædi: Subhane Rabbijel-E\'ala.'},
            {type:'dragDrop',question:'Dopuni mubarek-dane:',template:['Mubarek-dana ima','DROP','Treƒái je','DROP'],words:['4.','Ramazanski bajram','3.','Mevlud','5.','Nova godina'],correct:['4.','Ramazanski bajram'],explanation:'Mubarek-dana 4, treƒái je Ramazanski bajram.'}
        ];

        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        const TOTAL_QUESTIONS = 20;
        let currentAnswer = null;

        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function startQuiz() {
            currentQuestions = shuffleArray(allQuestions).slice(0, TOTAL_QUESTIONS);
            currentQuestionIndex = 0;
            score = 0;
            
            document.getElementById('startScreen').classList.remove('active');
            document.getElementById('resultScreen').classList.remove('active');
            document.getElementById('quizScreen').classList.add('active');
            
            showQuestion();
        }

        function showQuestion() {
            const question = currentQuestions[currentQuestionIndex];
            currentAnswer = null;
            
            document.getElementById('questionText').textContent = question.question;
            document.getElementById('questionCount').textContent = `${currentQuestionIndex + 1}/${TOTAL_QUESTIONS}`;
            document.getElementById('progressBar').style.width = `${((currentQuestionIndex) / TOTAL_QUESTIONS) * 100}%`;
            
            const container = document.getElementById('questionContainer');
            container.innerHTML = '';
            
            if (question.type === 'checkbox') {
                renderCheckbox(question, container);
            } else if (question.type === 'reorder') {
                renderReorder(question, container);
            } else if (question.type === 'markWords') {
                renderMarkWords(question, container);
            } else if (question.type === 'dragDrop') {
                renderDragDrop(question, container);
            }
        }

        function renderCheckbox(q, container) {
            const shuffled = shuffleArray([...q.options]);
            shuffled.forEach(opt => {
                const div = document.createElement('div');
                div.className = 'option checkbox-option';
                div.innerHTML = `<input type="checkbox" value="${opt}"><span>${opt}</span>`;
                container.appendChild(div);
            });
            
            const btn = document.createElement('button');
            btn.className = 'answer-btn';
            btn.textContent = 'PROVJERI ODGOVOR';
            btn.onclick = checkCheckbox;
            container.appendChild(btn);
        }

        function checkCheckbox() {
            const q = currentQuestions[currentQuestionIndex];
            const checkboxes = document.querySelectorAll('#questionContainer input[type="checkbox"]');
            const selected = [];
            checkboxes.forEach(cb => {
                if (cb.checked) selected.push(cb.value);
            });
            
            const isCorrect = q.correct.length === selected.length && 
                             q.correct.every(c => selected.includes(c));
            
            if (isCorrect) score++;
            showPopup(isCorrect, q.explanation);
        }

        function renderReorder(q, container) {
            const ul = document.createElement('ul');
            ul.className = 'reorder-list';
            ul.id = 'reorderList';
            
            const shuffled = shuffleArray([...q.items]);
            shuffled.forEach((item) => {
                const li = document.createElement('li');
                li.className = 'reorder-item';
                li.dataset.correctOrder = item.order;
                li.innerHTML = `
                    <span>${item.text}</span>
                    <div class="reorder-controls">
                        <button class="reorder-btn" onclick="moveItemUp(this)">‚Üë</button>
                        <button class="reorder-btn" onclick="moveItemDown(this)">‚Üì</button>
                    </div>
                `;
                ul.appendChild(li);
            });
            container.appendChild(ul);
            
            const btn = document.createElement('button');
            btn.className = 'answer-btn';
            btn.textContent = 'PROVJERI REDOSLIJED';
            btn.onclick = checkReorder;
            container.appendChild(btn);
        }

        function moveItemUp(btn) {
            const item = btn.closest('.reorder-item');
            const prev = item.previousElementSibling;
            if (prev) {
                item.parentNode.insertBefore(item, prev);
            }
        }

        function moveItemDown(btn) {
            const item = btn.closest('.reorder-item');
            const next = item.nextElementSibling;
            if (next) {
                item.parentNode.insertBefore(next, item);
            }
        }

        function checkReorder() {
            const q = currentQuestions[currentQuestionIndex];
            const items = document.querySelectorAll('#reorderList .reorder-item');
            let correct = 0;
            
            items.forEach((item, idx) => {
                const correctOrder = parseInt(item.dataset.correctOrder);
                if (correctOrder === idx + 1) correct++;
            });
            
            const isCorrect = correct === items.length;
            if (isCorrect) score++;
            showPopup(isCorrect, q.explanation);
        }

        function renderMarkWords(q, container) {
            const textDiv = document.createElement('div');
            textDiv.className = 'text-container';
            
            q.words.forEach((word, idx) => {
                const span = document.createElement('span');
                span.className = 'word';
                span.textContent = word;
                span.dataset.index = idx;
                span.onclick = function() {
                    this.classList.toggle('marked');
                };
                textDiv.appendChild(span);
                // Add explicit space after each word except the last one
                if (idx < q.words.length - 1) {
                    const space = document.createTextNode('\u00A0'); // non-breaking space
                    textDiv.appendChild(space);
                }
            });
            container.appendChild(textDiv);
            
            const btn = document.createElement('button');
            btn.className = 'answer-btn';
            btn.textContent = 'PROVJERI OZNAƒåENE RIJEƒåI';
            btn.onclick = checkMarkWords;
            container.appendChild(btn);
        }

        function checkMarkWords() {
            const q = currentQuestions[currentQuestionIndex];
            const words = document.querySelectorAll('.word');
            const marked = [];
            
            words.forEach(word => {
                if (word.classList.contains('marked')) {
                    marked.push(parseInt(word.dataset.index));
                }
            });
            
            const isCorrect = q.incorrect.length === marked.length && 
                             q.incorrect.every(i => marked.includes(i));
            
            if (isCorrect) score++;
            showPopup(isCorrect, q.explanation);
        }

        function renderDragDrop(q, container) {
            // Add instructions
            const instructions = document.createElement('p');
            instructions.style.cssText = 'color: #fbbf24; margin-bottom: 1rem; font-size: 0.95rem; text-align: center;';
            instructions.innerHTML = 'üí° <strong>Upute:</strong> Klikni na rijeƒç, pa klikni na ≈æuto polje';
            container.appendChild(instructions);
            
            const builder = document.createElement('div');
            builder.className = 'sentence-builder';
            builder.id = 'sentenceBuilder';
            
            let dropIndex = 0;
            q.template.forEach(part => {
                if (part === 'DROP') {
                    const drop = document.createElement('div');
                    drop.className = 'drop-zone';
                    drop.dataset.index = dropIndex++;
                    drop.dataset.value = '';
                    drop.textContent = '___';
                    drop.onclick = function(e) {
                        e.stopPropagation();
                        // If there's a selected word and this zone is empty
                        if (currentAnswer && !this.dataset.value) {
                            this.textContent = currentAnswer.textContent;
                            this.dataset.value = currentAnswer.textContent;
                            this.classList.add('filled');
                            this.style.borderStyle = 'solid';
                            currentAnswer.classList.add('used');
                            currentAnswer.classList.remove('selected');
                            currentAnswer = null;
                        } 
                        // If this zone is filled, remove the word
                        else if (this.dataset.value) {
                            const wordText = this.dataset.value;
                            this.textContent = '___';
                            this.dataset.value = '';
                            this.classList.remove('filled');
                            this.style.borderStyle = 'dashed';
                            // Find and un-use the word
                            document.querySelectorAll('.draggable-word').forEach(w => {
                                if (w.textContent.trim() === wordText.trim()) {
                                    w.classList.remove('used');
                                }
                            });
                        }
                    };
                    builder.appendChild(drop);
                } else {
                    const text = document.createElement('span');
                    text.textContent = part;
                    builder.appendChild(text);
                }
            });
            container.appendChild(builder);
            
            const bank = document.createElement('div');
            bank.className = 'word-bank';
            
            shuffleArray([...q.words]).forEach(word => {
                const div = document.createElement('div');
                div.className = 'draggable-word';
                div.textContent = word;
                div.onclick = function(e) {
                    e.stopPropagation();
                    if (!this.classList.contains('used')) {
                        // Reset all words first
                        document.querySelectorAll('.draggable-word').forEach(w => {
                            w.classList.remove('selected');
                        });
                        // Select this word
                        currentAnswer = this;
                        this.classList.add('selected');
                    }
                };
                bank.appendChild(div);
            });
            container.appendChild(bank);
            
            const btn = document.createElement('button');
            btn.className = 'answer-btn';
            btn.textContent = 'PROVJERI REƒåENICU';
            btn.onclick = checkDragDrop;
            container.appendChild(btn);
        }

        function checkDragDrop() {
            const q = currentQuestions[currentQuestionIndex];
            const zones = document.querySelectorAll('#sentenceBuilder .drop-zone');
            let correct = 0;
            
            zones.forEach((zone, idx) => {
                const userAnswer = (zone.dataset.value || '').trim();
                const correctAnswer = (q.correct[idx] || '').trim();
                if (userAnswer === correctAnswer) {
                    correct++;
                }
            });
            
            const isCorrect = correct === q.correct.length && correct > 0;
            if (isCorrect) score++;
            showPopup(isCorrect, q.explanation);
        }

        function showPopup(isCorrect, explanation) {
            const popup = document.getElementById('popupOverlay');
            const icon = document.getElementById('popupIcon');
            const title = document.getElementById('popupTitle');
            const explanationEl = document.getElementById('popupExplanation');
            
            if (isCorrect) {
                icon.textContent = '‚úÖ';
                title.textContent = 'Taƒçno!';
                title.style.color = '#065f46';
            } else {
                icon.textContent = '‚ùå';
                title.textContent = 'Netaƒçno!';
                title.style.color = '#dc2626';
            }
            
            explanationEl.textContent = explanation;
            popup.classList.add('active');
        }

        function nextQuestion() {
            document.getElementById('popupOverlay').classList.remove('active');
            currentQuestionIndex++;
            
            if (currentQuestionIndex >= TOTAL_QUESTIONS) {
                showResults();
            } else {
                showQuestion();
            }
        }

        function showResults() {
            const percentage = Math.round((score / TOTAL_QUESTIONS) * 100);
            let message, emoji;
            
            if (percentage >= 90) {
                message = 'Izvanredno! Mashallah!';
                emoji = 'üèÜ';
            } else if (percentage >= 70) {
                message = 'Vrlo dobro!';
                emoji = '‚ú®';
            } else if (percentage >= 50) {
                message = 'Dobro! Nastavite uƒçiti.';
                emoji = 'üìö';
            } else {
                message = 'Potrebno je vi≈°e uƒçenja.';
                emoji = 'üí™';
            }
            
            document.getElementById('quizScreen').classList.remove('active');
            document.getElementById('resultScreen').classList.add('active');
            
            document.getElementById('resultEmoji').textContent = emoji;
            document.getElementById('resultMessage').textContent = message;
            document.getElementById('resultScore').textContent = `${score}/${TOTAL_QUESTIONS}`;
            document.getElementById('resultPercentage').textContent = `${percentage}% taƒçnih odgovora`;
        }
    </script>
</body>
</html>
